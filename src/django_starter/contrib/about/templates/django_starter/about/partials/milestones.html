{% load i18n %}

{% for milestone in milestones %}
    <li class="rounded-3xl border border-slate-200/10 bg-white/60 p-6 shadow-sm ring-1 ring-slate-900/5 dark:bg-slate-950/30 dark:ring-white/10" data-aos="fade-up">
        <div class="flex items-start gap-4">
            <div class="mt-1 flex h-10 w-10 shrink-0 items-center justify-center rounded-2xl bg-indigo-600/10 text-indigo-700 ring-1 ring-indigo-600/15 dark:text-indigo-300">
                <i class="fa-solid fa-timeline"></i>
            </div>
            <div>
                <p class="text-xs font-semibold uppercase tracking-wide text-indigo-700 dark:text-indigo-300">{{ milestone.year }}</p>
                <p class="mt-1 text-base font-semibold text-slate-900 dark:text-white">{{ milestone.title }}</p>
                <p class="mt-2 text-sm leading-6 text-slate-600 dark:text-slate-300">{{ milestone.description }}</p>
            </div>
        </div>
    </li>
{% endfor %}

<div id="milestoneLoadMore" hx-swap-oob="outerHTML" class="mt-6">
    {% if has_more %}
        <button
            type="button"
            hx-get="{% url 'djs_about:partials_milestones' %}?offset={{ next_offset }}"
            hx-target="#milestoneList"
            hx-swap="beforeend"
            hx-on:htmx:beforeRequest="this.querySelector('[data-spinner]').classList.remove('hidden'); this.querySelector('[data-label]').classList.add('hidden'); this.disabled = true;"
            hx-on:htmx:afterRequest="this.querySelector('[data-spinner]').classList.add('hidden'); this.querySelector('[data-label]').classList.remove('hidden');"
            class="inline-flex items-center justify-center gap-2 rounded-full border border-slate-200/20 bg-white/60 px-6 py-3 text-sm font-medium text-slate-800 shadow-sm transition duration-200 ease-out hover:bg-white/80 focus:outline-none focus:ring-4 focus:ring-slate-900/10 disabled:cursor-not-allowed disabled:opacity-60 dark:bg-slate-900/30 dark:text-slate-200 dark:hover:bg-slate-900/50">
            <span data-label class="inline-flex items-center gap-2">
                <i class="fa-solid fa-plus"></i>
                {% trans "展开更多" %}
            </span>
            <span data-spinner class="hidden inline-flex items-center gap-2">
                <i class="fa-solid fa-circle-notch animate-spin"></i>
                {% trans "加载中" %}
            </span>
        </button>
    {% endif %}
</div>
