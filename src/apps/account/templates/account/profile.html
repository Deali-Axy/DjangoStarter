{% extends 'account/_profile_layout.html' %}

{% block title %}个人资料{% endblock %}

{% block sub_content %}
    <div class="mb-6 border-b border-base-200 pb-4">
        <h2 class="text-2xl font-bold flex items-center gap-2">
            <i class="fa-solid fa-user-edit text-primary"></i>
            修改个人资料
        </h2>
        <p class="text-base-content/60 mt-1">更新您的个人信息和偏好设置</p>
    </div>

    <form method="POST" class="space-y-6 max-w-2xl">
        {% csrf_token %}
        
        {% for field in form %}
            <div class="form-control">
                <label class="label" for="{{ field.id_for_label }}">
                    <span class="label-text font-medium">{{ field.label }}</span>
                    {% if field.field.required %}
                        <span class="label-text-alt text-error">*</span>
                    {% endif %}
                </label>
                
                {% if field.field.widget.input_type == 'select' %}
                    <select name="{{ field.name }}" id="{{ field.id_for_label }}" class="select select-bordered w-full">
                        {% for choice in field.field.choices %}
                            <option value="{{ choice.0 }}" {% if choice.0 == field.value %}selected{% endif %}>{{ choice.1 }}</option>
                        {% endfor %}
                    </select>
                {% else %}
                    <input type="{{ field.field.widget.input_type }}" 
                           name="{{ field.name }}" 
                           id="{{ field.id_for_label }}"
                           value="{{ field.value|default:'' }}"
                           class="input input-bordered w-full"
                           placeholder="请输入{{ field.label }}">
                {% endif %}
                
                {% if field.errors %}
                    <div class="label">
                        <span class="label-text-alt text-error flex items-center gap-1">
                            <i class="fa-solid fa-circle-exclamation"></i>
                            {{ field.errors.0 }}
                        </span>
                    </div>
                {% endif %}
            </div>
        {% endfor %}

        <div class="flex gap-4 pt-4">
            <button type="submit" class="btn btn-primary">
                <i class="fa-solid fa-save"></i>
                保存资料
            </button>
            <a href="{% url 'account:index' %}" class="btn btn-ghost">
                返回
            </a>
        </div>
    </form>

    <div class="alert alert-info mt-8 shadow-sm">
        <i class="fa-solid fa-circle-info"></i>
        <div>
            <h3 class="font-bold">温馨提示</h3>
            <div class="text-xs">请确保您的个人信息准确无误，这将有助于我们为您提供更好的服务。标有 <span class="text-error">*</span> 的字段为必填项。</div>
        </div>
    </div>
{% endblock %}
