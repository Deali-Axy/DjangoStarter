{% load i18n %}
{% load nav_menu_tags %}

<div class="navbar bg-base-100 border-b border-base-200 sticky top-0 z-30 backdrop-blur">
    <div class="navbar-start">
        <div class="flex-none lg:hidden">
            <label for="app-drawer" aria-label="open sidebar" class="btn btn-square btn-ghost">
                <i class="fa-solid fa-bars"></i>
            </label>
        </div>
        <a href="{% url 'home:index' %}" class="btn btn-ghost text-xl hidden lg:flex gap-2">
            <i class="fa-brands fa-python text-primary"></i>
            DjangoStarter
        </a>
    </div>

    <div class="navbar-center hidden lg:flex">
        <ul class="menu menu-horizontal px-1">
            {% get_nav_menu as nav_menu %}
            {% for menu_item in nav_menu %}
                <li>
                    <a href="{{ menu_item.url }}">
                        <i class="{{ menu_item.icon }}"></i>
                        {{ menu_item.name }}
                    </a>
                </li>
            {% endfor %}
        </ul>
    </div>

    <div class="navbar-end gap-2">
        <!-- Language Switcher -->
        {% include '_components/language_switcher.html' %}

        <!-- Theme Toggle -->
        <button class="btn btn-ghost btn-circle" onclick="toggleDarkMode()">
            <i class="fa-solid fa-moon dark:hidden"></i>
            <i class="fa-solid fa-sun hidden dark:inline"></i>
        </button>

        {% if user.is_authenticated %}
            <div class="dropdown dropdown-end">
                <div tabindex="0" role="button" class="btn btn-ghost btn-circle avatar placeholder">
                    <div class="bg-neutral text-neutral-content rounded-full w-10">
                        <span class="text-xs">{{ user.username|slice:":1"|upper }}</span>
                    </div>
                </div>
                <ul tabindex="0" class="mt-3 z-[1] p-2 shadow menu menu-sm dropdown-content bg-base-100 rounded-box w-52">
                    <li>
                        <a href="{% url 'account:index' %}" class="justify-between">
                            {% trans "Profile" %}
                        </a>
                    </li>
                    {% if request.user.is_staff %}
                        <li><a href="{% url 'admin:index' %}">{% trans "Admin Panel" %}</a></li>
                    {% endif %}
                    <li><a href="{% url 'account:logout' %}">{% trans "Logout" %}</a></li>
                </ul>
            </div>
        {% else %}
            <a href="{% url 'account:login' %}" class="btn btn-primary btn-sm">
                {% trans "Login" %}
            </a>
        {% endif %}
    </div>
</div>
